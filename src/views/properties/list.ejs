<%- include('../partials/header') %>
<h2>Propiedades disponibles</h2>
<div class="cards">
  <% props.forEach(p=>{ %>
  <article class="card">
    <h3><a href="/properties/<%= p.id %>"><%= p.titulo %></a></h3>

    <% if (p.photosArr && p.photosArr.length) {
         const u = p.photosArr[0];
         const src = (u.startsWith('http') || u.startsWith('/')) ? u : '/uploads/' + u;
    %>
      <img src="<%= src %>" alt="Foto principal" style="max-width: 200px" />
    <% } %>

    <p>
      <%= p.ubicacion || '' %> — <%= p.habitaciones || 0 %> hab. —
      <%= p.precio ? (p.precio + '€') : 'Precio a convenir' %>
    </p>
    <a class="btn" href="/properties/<%= p.id %>">Ver</a>
  </article>
  <% }) %>
</div>
<%- include('../partials/footer') %>